{"version":3,"sources":["../../../src/@ionic-native/plugins/in-app-purchase-2/index.ts"],"names":[],"mappings":"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","file":"index.js","sourceRoot":"","sourcesContent":["import { Plugin, IonicNativePlugin, Cordova, CordovaProperty } from '@ionic-native/core';\nimport { Injectable } from '@angular/core';\n\n/**\n * @name In App Purchase 2\n * @description\n * In-App Purchase for Cordova on iOS, Android and Windows\n *\n * @usage\n * ```typescript\n * import { InAppPurchase2 } from '@ionic-native/in-app-purchase-2';\n *\n * constructor(private store: InAppPurchase2) { }\n *\n * ...\n * ```\n *\n *  * @advanced\n *\n *  ```typescript\n *    // After Platform Ready\n *    this.store.verbosity = this.store.DEBUG;\n *    this.store.register({\n *      id: productId,\n *      alias: productId,\n *      type: this.store.NON_RENEWING_SUBSCRIPTION\n *    });\n *\n *    // Register Event Handlers for the specific product\n *   this.store.when(productId).registered( (product: IAPProduct) => {\n *     console.log('Registered: ' + JSON.stringify(product));\n *   });\n *\n *    // Updated\n *    this.store.when(productId).updated( (product: IAPProduct) => {\n *      console.log('Loaded' + JSON.stringify(product));\n *    });\n *\n *    // Issue with buying\n *     this.store.when(productId).cancelled( (product) => {\n *         alert('Purchase was Cancelled');\n *     });\n *\n *      // Track All Store Errors\n *     this.store.error( (err) => {\n *       alert('Store Error ' + JSON.stringify(err));\n *     });\n *\n *     this.store.ready().then((status) => {\n *       console.log(JSON.stringify(this.store.get(productId)));\n *       console.log('Store is Ready: ' + JSON.stringify(status));\n *       console.log('Products: ' + JSON.stringify(this.store.products));\n *     });\n *\n *\n *     // Errors\n *     this.store.when(productId).error( (error) => {\n *       this.loader.dismiss();\n *       alert('An Error Occured' + JSON.stringify(error));\n *     });\n *     // Refresh Starts Handlers\n *     console.log('Refresh Store');\n *     this.store.refresh();\n *\n *    ...\n *\n *    // To Purchase\n *    this.store.order(productId);\n *\n * ```\n *\n */\n\nexport interface IAPProductOptions {\n  id: string;\n  alias: string;\n  type: string;\n}\n\nexport type IAPProducts = Array<IAPProduct> & {\n  /**\n   * Get product by ID\n   */\n  byId: { [id: string]: IAPProduct; };\n  /**\n   * Get product by alias\n   */\n  byAlias: { [alias: string]: IAPProduct; };\n  /**\n   * Remove all products (for testing only).\n   */\n  reset: () => {};\n};\n\nexport type IAPQueryCallback = ((product: IAPProduct) => void) | ((error: IAPError) => void);\n\nexport interface IAPProduct {\n\n  id: string;\n\n  alias: string;\n\n  type: string;\n\n  state: string;\n\n  title: string;\n\n  description: string;\n\n  priceMicros: string;\n\n  price: string;\n\n  currency: string;\n\n  loaded: boolean;\n\n  valid: boolean;\n\n  canPurchase: boolean;\n\n  owned: boolean;\n\n  downloading: boolean;\n\n  downloaded: boolean;\n\n  additionalData: any;\n\n  transaction: any;\n\n  finish(): void;\n\n  verify(): any;\n\n  set(key: string, value: any): void;\n\n  stateChanged(): void;\n\n  on(event: string, callback: Function): void;\n\n  once(event: string, callback: Function): void;\n\n  off(callback: Function): void;\n\n  trigger(action: string, args: any): void;\n\n}\n\nexport interface IAPProductEvents {\n  loaded: (callback: IAPQueryCallback) => void;\n  updated: (callback: IAPQueryCallback) => void;\n  error: (callback: IAPQueryCallback) => void;\n  approved: (callback: IAPQueryCallback) => void;\n  owned: (callback: IAPQueryCallback) => void;\n  cancelled: (callback: IAPQueryCallback) => void;\n  refunded: (callback: IAPQueryCallback) => void;\n  registered: (callback: IAPQueryCallback) => void;\n  valid: (callback: IAPQueryCallback) => void;\n  invalid: (callback: IAPQueryCallback) => void;\n  requested: (callback: IAPQueryCallback) => void;\n  initiated: (callback: IAPQueryCallback) => void;\n  finished: (callback: IAPQueryCallback) => void;\n  verified: (callback: IAPQueryCallback) => void;\n  unverified: (callback: IAPQueryCallback) => void;\n  expired: (callback: IAPQueryCallback) => void;\n  downloading: (product: IAPProduct, progress: any, time_remaining: any) => void;\n  downloaded: (callback: IAPQueryCallback) => void;\n}\n\n/**\n * @hidden\n */\nexport class IAPError {\n  code: number;\n  message: string;\n}\n\n/**\n * @name In App Purchase 2\n * @description\n *\n * @usage\n * ```\n * import { InAppPurchase2 } from '@ionic-native/in-app-purchase-2';\n *\n *\n * constructor(private inAppPurchase2: InAppPurchase2) { }\n *\n * ...\n *\n *\n * ```\n */\n@Plugin({\n  pluginName: 'InAppPurchase2',\n  plugin: 'cc.fovea.cordova.purchase',\n  pluginRef: 'store',\n  repo: 'https://github.com/j3k0/cordova-plugin-purchase',\n  platforms: ['iOS', 'Android', 'Windows'],\n  install: 'ionic cordova plugin add cc.fovea.cordova.purchase --variable BILLING_KEY=\"<ANDROID_BILLING_KEY>\"'\n})\n\nexport class InAppPurchase2 extends IonicNativePlugin {\n\n  @CordovaProperty\n  QUIET: number;\n\n  @CordovaProperty\n  ERROR: number;\n\n  @CordovaProperty\n  WARNING: number;\n\n  @CordovaProperty\n  INFO: number;\n\n  @CordovaProperty\n  DEBUG: number;\n\n  /**\n   * Debug level. Use QUIET, ERROR, WARNING, INFO or DEBUG constants\n   */\n  @CordovaProperty\n  verbosity: number;\n\n  /**\n   * Set to true to invoke the platform purchase sandbox. (Windows only)\n   */\n  @CordovaProperty\n  sandbox: boolean;\n\n  @CordovaProperty\n  FREE_SUBSCRIPTION: string;\n\n  @CordovaProperty\n  PAID_SUBSCRIPTION: string;\n\n  @CordovaProperty\n  NON_RENEWING_SUBSCRIPTION: string;\n\n  @CordovaProperty\n  CONSUMABLE: string;\n\n  @CordovaProperty\n  NON_CONSUMABLE: string;\n\n\n  @CordovaProperty\n  ERR_SETUP: number;\n\n  @CordovaProperty\n  ERR_LOAD: number;\n\n  @CordovaProperty\n  ERR_PURCHASE: number;\n\n  @CordovaProperty\n  ERR_LOAD_RECEIPTS: number;\n\n  @CordovaProperty\n  ERR_CLIENT_INVALID: number;\n\n  @CordovaProperty\n  ERR_PAYMENT_CANCELLED: number;\n\n  @CordovaProperty\n  ERR_PAYMENT_INVALID: number;\n\n  @CordovaProperty\n  ERR_PAYMENT_NOT_ALLOWED: number;\n\n  @CordovaProperty\n  ERR_UNKNOWN: number;\n\n  @CordovaProperty\n  ERR_REFRESH_RECEIPTS: number;\n\n  @CordovaProperty\n  ERR_INVALID_PRODUCT_ID: number;\n\n  @CordovaProperty\n  ERR_FINISH: number;\n\n  @CordovaProperty\n  ERR_COMMUNICATION: number;\n\n  @CordovaProperty\n  ERR_SUBSCRIPTIONS_NOT_AVAILABLE: number;\n\n  @CordovaProperty\n  ERR_MISSING_TOKEN: number;\n\n  @CordovaProperty\n  ERR_VERIFICATION_FAILED: number;\n\n  @CordovaProperty\n  ERR_BAD_RESPONSE: number;\n\n  @CordovaProperty\n  ERR_REFRESH: number;\n\n  @CordovaProperty\n  ERR_PAYMENT_EXPIRED: number;\n\n  @CordovaProperty\n  ERR_DOWNLOAD: number;\n\n  @CordovaProperty\n  ERR_SUBSCRIPTION_UPDATE_NOT_AVAILABLE: number;\n\n\n  @CordovaProperty\n  REGISTERED: string;\n\n  @CordovaProperty\n  INVALID: string;\n\n  @CordovaProperty\n  VALID: string;\n\n  @CordovaProperty\n  REQUESTED: string;\n\n  @CordovaProperty\n  INITIATED: string;\n\n  @CordovaProperty\n  APPROVED: string;\n\n  @CordovaProperty\n  FINISHED: string;\n\n  @CordovaProperty\n  OWNED: string;\n\n  @CordovaProperty\n  DOWNLOADING: string;\n\n  @CordovaProperty\n  DOWNLOADED: string;\n\n\n  @CordovaProperty\n  INVALID_PAYLOAD: number;\n\n  @CordovaProperty\n  CONNECTION_FAILED: number;\n\n  @CordovaProperty\n  PURCHASE_EXPIRED: number;\n\n  @CordovaProperty\n  products: IAPProducts;\n\n  @CordovaProperty\n  validator: string | ((product: string | IAPProduct, callback: Function) => void);\n\n  @CordovaProperty\n  log: {\n    error: (message: string) => void;\n    warn: (message: string) => void;\n    info: (message: string) => void;\n    debug: (message: string) => void;\n  };\n\n  /**\n   * Get product by id or alias\n   * @param idOrAlias\n   */\n  @Cordova({ sync: true })\n  get(idOrAlias: string): IAPProduct { return; }\n\n  /**\n   * Register error handler\n   * @param onError {Function} function to call on error\n   */\n  @Cordova({ sync: true })\n  error(onError: Function): void {}\n\n  /**\n   * Add or register a product\n   * @param product {IAPProductOptions}\n   */\n  @Cordova({ sync: true})\n  register(product: IAPProductOptions): void {}\n\n  /**\n   *\n   * @param query\n   * @param event\n   * @param callback\n   * @return {IAPProductEvents}\n   */\n  @Cordova({ sync: true })\n  when(query: string | IAPProduct, event?: string, callback?: IAPQueryCallback): IAPProductEvents { return; }\n\n  /**\n   * Identical to `when`, but the callback will be called only once. After being called, the callback will be unregistered.\n   * @param query {string | IAPProduct}\n   * @param [event] {event}\n   * @param [callback] {IAPQueryCallback}\n   * @return {IAPProductEvents}\n   */\n  @Cordova({ sync: true })\n  once(query: string | IAPProduct, event?: string, callback?: IAPQueryCallback): IAPProductEvents { return; }\n\n  /**\n   * Unregister a callback. Works for callbacks registered with ready, when, once and error.\n   * @param callback {Function}\n   */\n  @Cordova({ sync: true })\n  off(callback: Function): void {}\n\n  @Cordova({ sync: true })\n  order(product: string | IAPProduct, additionalData?: any): { then: Function; error: Function; } { return; }\n\n  /**\n   *\n   * @return {Promise<any>} returns a promise that resolves when the store is ready\n   */\n  @Cordova()\n  ready(): Promise<void> { return; }\n\n  @Cordova({ sync: true })\n  refresh(): void {}\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}